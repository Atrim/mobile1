<!DOCTYPE html>
<html>
  <head>
    <title>StarTrackr: Spot</title>

    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <link type="text/css" rel="stylesheet" href="stylesheets/screen.css" media="screen"/>
    <link type="text/css" rel="stylesheet" href="stylesheets/transitions.css" media="screen"/>
    <style type="text/css" media="screen">
      #pages {
        position: relative;
      }
      #pages > div {
        display:none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
      }
      #pages > div.current {
        display: block;
      }
      #header {
        position: relative;
      }
      #header .back{
        display: none;
      }
      #page-spot .back{
        display: block !important;
      }
    </style>
  </head> 
  <body>
    <ul id="tab-bar">
      <li id="tab-spots">
        <a data-load="spots" href="spots.html">
        Spots
        </a>
      </li>    
      <li id="tab-sighting">
        <a data-load="sightings" href="new.html">
        Add a sighting
        </a>
      </li>
      <li id="tab-stars">
        <a data-load="stars" href="stars.html">
        Stars
        </a>
      </li>
    </ul><!-- #tab-bar -->

    <div id="header">
      <h1>Spots</h1>
      <a href="#" class="back">Back</a>
    </div><!-- #header -->

    <!-- CHANGE: added pages for container -->
    <div id="pages">
      <div id="spots"></div>
      <div id="spot"></div>
      <div id="sightings"></div>
      <div id="stars"></div>
      <div id="star"></div>
    </div>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <script type="text/javascript">
    if(!window.jQuery){
      document.write(unescape('%3Cscript src="javascripts/vendor/jquery-1.5.min.js"%3E%3C/script%3E'));
    }
    </script>
    <script type="text/javascript" src="javascripts/vendor/modernizr-1.7.min.js"></script>
    <script type="text/javascript">
    var hasTouch = "ontouchend" in document,
      touchEndEvent = hasTouch ? "touchend" : "mouseup";

    $(document).ready(function(){
      // Hook up links to hijack
      $("#tab-bar a, #spots-list a").live("click", function(e){
        var url = e.currentTarget;
        loadPage(url, $(this).attr("data-load"), $(this).attr("data-trans"));
        e.preventDefault();
      });
      
      $("#page-spot .back").live("click", function(e){
        e.preventDefault();
        transition("#spots", "push", true)
      })
  
      // Load first page
      loadPage("spots.html", "spots");
    });

    function loadPage(url, pageName, trans) {
      $("#pages #" + pageName).load(url + " #wrapper", function(){
        $("body").attr("id", "page-" + pageName);
        transition(this, trans || "show");
      });
    };

    function transition(toPage, type, reverse){
      var toPage = $(toPage),
        fromPage = $("#pages .current"),
        reverse = reverse ? "reverse" : "";
      toPage
        .addClass("current " + type + " in " + reverse)
        .one("webkitAnimationEnd", function(){
          fromPage.removeClass("current " + type + " out " + reverse);
          toPage.removeClass(type + " in " + reverse);
        });
      fromPage.addClass(type + " out " + reverse);
    }
    </script>
  </body>
</html>