<!DOCTYPE html>
<html>
	<head>
		<title>StarTrackr: Spot</title>

		<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<meta name="apple-mobile-web-app-capable" content="yes" />

		<link type="text/css" rel="stylesheet" href="../stylesheets/screen.css" media="screen"/>
		<link type="text/css" rel="stylesheet" href="../stylesheets/transitions.css" media="screen"/>
		<style type="text/css" media="screen">
			#pages {
				position: relative;
			}
			#pages > div {
				display:none;
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
			}
			#pages > div.current {
				display: block;
			}
			#header {
				position: relative;
			}
			#header .back{
				display: none;
			}


			#geo-map {
				width: 100%;
				height: 300px;
			}
		</style>
	</head> 
	<body>
		<ul id="tab-bar">
			<li id="tab-spots">
				<a data-load="spots" href="../spots.html">
				Spots
				</a>
			</li>		 
			<li id="tab-sighting">
				<a data-load="sightings" href="../new.html">
				Add a sighting
				</a>
			</li>
			<li id="tab-stars">
				<a data-load="stars" href="../stars.html">
				Stars
				</a>
			</li>
		</ul><!-- #tab-bar -->

		<div id="header">
			<h1>Spots</h1>
			<a href="#" class="back">Back</a>
		</div><!-- #header -->

		<!-- CHANGE: added pages for container -->
		<div id="pages">
			<div id="spots" class="current">
				<!-- "Spots" content -->
				 <div id="geo-map"></div>
				 <span class="button">!!!</span>
			</div>
		</div>
		<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
		<script type="text/javascript">
		if(!window.jQuery){
			document.write(unescape('%3Cscript src="../javascripts/vendor/jquery-1.5.min.js"%3E%3C/script%3E'));
		}
		</script>
		<script type="text/javascript" src="../javascripts/vendor/jquery.tmpl.min" ></script>
		<script type="text/javascript" src="../javascripts/vendor/modernizr-1.7.min.js"></script>
		<script type="text/javascript">
			$(document).ready(function(){
				var mapElement,
					mapOptions,
					map;
				
				mapElement = $("#geo-map")[0],
				mapOptions = {
					zoom: 12,
					streetViewControl: false,
					center: new google.maps.LatLng(-37.8071, 144.9853),
					mapTypeId: google.maps.MapTypeId.ROADMAP
				};
				map = new google.maps.Map(mapElement, mapOptions);

				
/*
                // Ex 04-01 - first geo
                navigator.geolocation.getCurrentPosition(
                    function(pos) {
                        // Succesfully got location
                        alert(pos.coords.latitude + ":" + pos.coords.longitude);
                    },
                    function(error) {
                        // Failed to get location
                        alert(error);
                    }, {
                        // Options for geolocation
                        maximumAge: 10000, 
                        timeout: 10000,
                        enableHighAccuracy: true
                    }
                );*/

                /*
				// Ex 04-02 - plot on map
				navigator.geolocation.getCurrentPosition(
					function(pos) {
						// Succesfully got location
						var posLatLng = new google.maps.LatLng(
								pos.coords.latitude, 
								pos.coords.longitude);

						var marker = new google.maps.Marker({
							position: posLatLng, 
							map: map,
							draggable:true,
							animation: google.maps.Animation.DROP,
							title:"You are here!"
						});
						map.setCenter(posLatLng);
					},
					function(error) {
						// Failed to get location
						alert(error);
					}, {
						// Options for geolocation
						maximumAge: 10000, 
						timeout: 10000,
						enableHighAccuracy: true
					}
				);
				*/
				
				// Ex 04-01 - Tracking
				var watchId = navigator.geolocation.watchPosition(
					function(pos) {
					    console.log(pos)
						// Succesfully got location
						var posLatLng = new google.maps.LatLng(
								pos.coords.latitude, 
								pos.coords.longitude);

						var marker = new google.maps.Marker({
							position: posLatLng, 
							map: map,
							draggable:true,
							animation: google.maps.Animation.DROP,
							title:"You are here!"
						});
						map.setCenter(posLatLng);
					},
					function(error) {
						// Failed to get location
						alert(error);
					}
				);

                function buttonClickHandler() {
                  // Cancel the updates when the user clicks a button.
                  navigator.geolocation.clearWatch(watchId);
                }
			});
			
		</script>
	</body>
</html>