<!DOCTYPE html>
<html>
	<head>
		<title>StarTrackr: Spot</title>

		<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<meta name="apple-mobile-web-app-capable" content="yes" />

		<link type="text/css" rel="stylesheet" href="../stylesheets/screen.css" media="screen"/>
		<link type="text/css" rel="stylesheet" href="../stylesheets/transitions.css" media="screen"/>
		<style type="text/css" media="screen">
			#pages {
				position: relative;
			}
			#pages > div {
				display:none;
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
			}
			#pages > div.current {
				display: block;
			}


			#gallery {
			    background-color: #800;
			    height: 300px;
			}
			#gallery > div {
				position:absolute;
				top: 0;
				left: 0;
				display: none;

				border:1px solid black;
				-webkit-box-sizing: border-box;
				height: 200px;
				width: 100%;
				background-color: #050;
			}
			#gallery > div.current {
				display: block;
			}

		</style>
	</head> 
	<body>
		<ul id="tab-bar">
			<li id="tab-spots">
				<a data-load="spots" href="../spots.html">
				Spots
				</a>
			</li>		 
			<li id="tab-sighting">
				<a data-load="sightings" href="../new.html">
				Add a sighting
				</a>
			</li>
			<li id="tab-stars">
				<a data-load="stars" href="../stars.html">
				Stars
				</a>
			</li>
		</ul><!-- #tab-bar -->

		<div id="header">
			<h1>Spots</h1>
			<a href="#" class="back">Back</a>
		</div><!-- #header -->

		<!-- CHANGE: added pages for container -->
		<div id="pages">
			<div id="photos" class="current">
				<!-- "Edit" content -->
				<div id="gallery">
					<div class="current">1</div>
					<div>2</div>
					<div>3</div>
					<div>4</div>
					<div>5a</div>
				</div>
			</div>
		</div>

		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
		<script type="text/javascript">
		if(!window.jQuery){
			document.write(unescape('%3Cscript src="../javascripts/vendor/jquery-1.5.min.js"%3E%3C/script%3E'));
		}
		</script>
		<script type="text/javascript" src="../javascripts/vendor/jquery.tmpl.min" ></script>
		<script type="text/javascript" src="../javascripts/vendor/modernizr-1.7.min.js"></script>
		<script type="text/javascript">

			// Swipe left & right
			var xStart;
			$("#gallery").bind({
				"touchstart mousedown": function(e) {
					e.preventDefault();
					var event = e.originalEvent,
						touch = event.targetTouches ? event.targetTouches[0] : e;

					xStart = touch.pageX;
				},
				"touchend mouseup": function(e) {
					var event = e.originalEvent,
						touch = event.changedTouches ? event.changedTouches[0] : e,
						diffX = touch.pageX - xStart;

					// See if we swiped!
					if(Math.abs(diffX) > 30) {
						if( diffX > 0 ){
							rotatePic(false);
						} 
						else {
							rotatePic(true);
						}
					}
				},
				"touchmove": function(e) {
					e.preventDefault();
				}
			});

			function rotatePic(isLeft) {
				var photos = $("#gallery > div"),
					current = photos.siblings(".current"),
					next;

				if(isLeft) {
					next = current.next();					
				}
				else {
					next = current.prev();
				}
				if(next.length === 0){
					return;
				}

			 	transition(next, current, "push", !isLeft);			
			}

			function transition(toPage, fromPage, type, reverse) {
				var toPage = $(toPage),
					fromPage = $(fromPage),
					reverse = reverse ? "reverse" : "";

				if(toPage.hasClass("current") || toPage === fromPage) { 
					return; 
				};
				toPage
					.addClass("current " + type + " in " + reverse)
					.one("webkitAnimationEnd", function(){
						fromPage.removeClass("current " + type + " out " + reverse);
						toPage.removeClass(type + " in " + reverse);
					});
				fromPage.addClass(type + " out " + reverse);
			}
		</script>
	</body>
</html>